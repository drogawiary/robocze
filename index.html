<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Droga wiary</title>
  <meta name="description" content="Droga Wiary — strona dla katolików."/>
  <style>
    * { box-sizing: border-box; -webkit-text-size-adjust: 100%; }
    html, body { margin: 0; padding: 0; }

    :root{
      --bg:#1b2a49; --panel:#22355c; --panel-2:#1d2e50;
      --ink:#e7ecf6; --muted:#aab3c6; --border:#2e4a7f;
      --accent:#4a8cff; --accent-2:#7aa8ff; --shadow:0 10px 25px rgba(0,0,0,.25);
    }

    body {
      font-family: system-ui, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .wrap {
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border-radius: 20px;
      box-shadow: var(--shadow);
      max-width: 900px;
      width: 100%;
      padding: 16px;
    }

    header.book {
      background: linear-gradient(145deg,#0b3d91,#1565c0,#1e88e5);
      color: #fff;
      text-align: center;
      padding: 32px 20px;
      border-radius: 14px;
      margin-bottom: 20px;
      font-size: clamp(32px, 5vw, 52px);
      font-family: 'Playfair Display', serif;
      text-shadow: 0 0 8px #fff, 0 0 16px #a8c8ff;
      box-shadow: inset 0 0 10px #ffffff22;
    }

    .buttons-frame {
      display: grid;
      grid-template-columns: repeat(4, minmax(80px, 1fr));
      gap: 8px;
      justify-items: center;
      align-items: center;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px;
      box-shadow: var(--shadow);
    }

    .nav-btn {
      padding: 6px 10px;
      border: 1px solid var(--accent);
      color: #fff;
      background: transparent;
      border-radius: 10px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all .3s ease;
      min-width: unset;
      width: auto;
      box-sizing: border-box;
    }

    .nav-btn.active, .nav-btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(74,140,255,.4);
    }

    @media (max-width: 700px) {
      .buttons-frame { grid-template-columns: repeat(2, 1fr); }
      .nav-btn { width: 90%; }
    }

    .intro-box {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 24px;
      margin-top: 24px;
      line-height: 1.6;
    }

    .intro-box h2 {
      margin-top: 0;
      font-size: 1.4rem;
      color: var(--ink);
    }

    .tiles {
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin-top: 24px;
      animation: fade .25s ease-out;
    }

    @keyframes fade { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: none;} }

    .card {
      background: #f5ecd9;
      color: #2a1f0e;
      border-radius: 14px;
      box-shadow: 0 4px 15px rgba(0,0,0,.2);
      padding: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card img {
      width: 80px;
      height: auto;
      margin: 0 auto 10px;
      border-radius: 10px;
    }

    .card h3 { margin: 10px 0; font-size: 1.2rem; }
    .card p  { font-size: 0.9rem; color: #333; flex-grow: 1; }

    .tags { margin: 10px 0; }
    .tag {
      background: var(--accent);
      color: #fff;
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.8rem;
      margin-right: 6px;
    }

    .go {
      display: inline-block;
      margin-top: 10px;
      background: var(--accent);
      color: #fff;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      transition: background .3s;
    }

    .go:hover { background: var(--accent-2); }

    /* Czytnik artykułów */
    #reader article p { margin: 0 0 10px; }
    #reader article h2, #reader article h3 { margin: 12px 0 8px; }

    footer {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      text-align: center;
      color: var(--ink);
      padding: 20px;
      margin-top: 40px;
      font-size: 0.95rem;
    }

    footer a {
      color: var(--ink);
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover { color: var(--accent-2); }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="book">Droga wiary</header>

    <div class="buttons-frame">
      <button class="nav-btn" id="btn-wiara" aria-pressed="false">Moja wiara</button>
      <button class="nav-btn" id="btn-arty" aria-pressed="false">Artykuły</button>
      <button class="nav-btn" id="btn-modlitwy" aria-pressed="false">Modlitwy</button>
      <button class="nav-btn" id="btn-ksiazki" aria-pressed="false">Książki</button>
    </div>

    <div class="intro-box" id="intro">
      <h2>Wprowadzenie</h2>
      <p><strong>Dlaczego bywa tak ciężko?</strong> Wielu świętych mówiło, że właśnie dlatego różaniec bywa trudny: bo diabeł wie, jak wielką moc ma ta modlitwa. Wie, że jedno „Zdrowaś” może ocalić duszę, że różaniec w rękach dziecka jest groźniejszy dla piekła niż największa armia. Dlatego odciąga nas rozproszeniem, znużeniem, myślą, że to „nudne” albo „niepotrzebne”.</p>
      <p>Gdy trudno ci zacząć, zatrzymaj się na chwilę i pomyśl o słowach modlitwy „Zdrowaś Maryjo”. Spróbuj <strong>przytulić się sercem do Maryi</strong> – jak dziecko do swojej Matki. Ona rozumie wszystko: twoje zmęczenie, rozproszenia, lęki i brak siły. Chce tylko jednego – byś pozwolił Jej poprowadzić cię do Jezusa, jak najlepsza z matek prowadzi dziecko za rękę.</p>
    </div>

    <!-- Kafelki: Moja wiara -->
    <div class="tiles" id="tiles-wiara">
      <div class="card">
        <h3>Dom modlitwy</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Dom">
        <p>Jak stworzyć w swoim domu przestrzeń spotkania z Bogiem i pokoju serca.</p>
        <div class="tags"><span class="tag">modlitwa</span><span class="tag">duchowość</span></div>
        <a class="go" href="#wiara/dom-modlitwy">Przejdź</a>
      </div>
      <div class="card">
        <h3>Świadectwa wiary</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Pióro">
        <p>Prawdziwe historie ludzi, którzy odnaleźli Boga pośród trudności i wątpliwości.</p>
        <div class="tags"><span class="tag">świadectwa</span><span class="tag">życie</span></div>
        <a class="go" href="#wiara/swiadectwa-wiary">Przejdź</a>
      </div>
      <div class="card">
        <h3>Maryja prowadzi</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Różaniec">
        <p>Rozważania o obecności Maryi w naszym codziennym życiu i sile Jej wstawiennictwa.</p>
        <div class="tags"><span class="tag">maryja</span><span class="tag">różaniec</span></div>
        <a class="go" href="#wiara/maryja-prowadzi">Przejdź</a>
      </div>
    </div>

    <!-- Kafelki: Artykuły -->
    <div class="tiles" id="tiles-arty">
      <div class="card">
        <h3>Światło wiary</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Wiara">
        <p>Artykuły o nadziei, miłości i wytrwałości w codziennym życiu chrześcijanina.</p>
        <div class="tags"><span class="tag">wiara</span><span class="tag">życie</span></div>
        <a class="go" href="#arty/swiatlo-wiary">Czytaj</a>
      </div>
      <div class="card">
        <h3>Pokój serca</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Pokój">
        <p>Jak odnaleźć spokój duszy i wewnętrzną harmonię dzięki modlitwie i ciszy.</p>
        <div class="tags"><span class="tag">modlitwa</span><span class="tag">duchowość</span></div>
        <a class="go" href="#arty/pokoj-serca">Czytaj</a>
      </div>
      <div class="card">
        <h3>Duchowe drogowskazy</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Drogowskazy">
        <p>Rozważania o tym, jak Bóg prowadzi człowieka przez trudne etapy życia.</p>
        <div class="tags"><span class="tag">rozważania</span><span class="tag">wiara</span></div>
        <a class="go" href="#arty/duchowe-drogowskazy">Czytaj</a>
      </div>
    </div>

    <!-- Kafelki: Modlitwy -->
    <div class="tiles" id="tiles-modlitwy">
      <div class="card">
        <h3>Różaniec</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Różaniec">
        <p>Modlitwa, która prowadzi do serca Maryi i uczy nas kontemplacji życia Jezusa.</p>
        <div class="tags"><span class="tag">maryja</span><span class="tag">modlitwa</span></div>
        <a class="go" href="https://drogawiary.github.io/RC/">Przejdź</a>
      </div>
      <div class="card">
        <h3>Nowenna</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Nowenna">
        <p>Dziewięciodniowa modlitwa błagalna, przez którą powierzamy Bogu nasze intencje.</p>
        <div class="tags"><span class="tag">modlitwa</span><span class="tag">łaska</span></div>
        <a class="go" href="https://drogawiary.github.io/Nowenna_RW/">Przejdź</a>
      </div>
      <div class="card">
        <h3>Droga Krzyżowa</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Krzyż">
        <p>Rozważania męki Pańskiej, które pomagają nam w zjednoczeniu z cierpiącym Chrystusem.</p>
        <div class="tags"><span class="tag">krzyż</span><span class="tag">pasja</span></div>
        <a class="go" href="#">Przejdź</a>
      </div>
    </div>

    <!-- Kafelki: Książki -->
    <div class="tiles" id="tiles-ksiazki">
      <div class="card">
        <h3>Znaki Maryi</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Maryja">
        <p>Duchowe kompendium objawień maryjnych — od Fatimy po Gietrzwałd.</p>
        <div class="tags"><span class="tag">maryja</span><span class="tag">objawienia</span></div>
        <a class="go" href="#">Czytaj</a>
      </div>
      <div class="card">
        <h3>Świadectwo Alberta</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Albert">
        <p>Poruszająca historia człowieka, który przeszedł od ciemności do światła.</p>
        <div class="tags"><span class="tag">wiara</span><span class="tag">świadectwo</span></div>
        <a class="go" href="#">Czytaj</a>
      </div>
      <div class="card">
        <h3>Droga Wiary</h3>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Rosary2.jpg/240px-Rosary2.jpg" alt="Droga Wiary">
        <p>Główne kompendium duchowe — projekt łączący wszystkie rozważania w jedną całość.</p>
        <div class="tags"><span class="tag">książka</span><span class="tag">kompendium</span></div>
        <a class="go" href="#">Czytaj</a>
      </div>
    </div>

    <!-- Czytnik artykułów (widok pojedynczy) -->
    <section id="reader" class="intro-box" style="display:none">
      <h2 id="reader-title">Tytuł</h2>
      <article id="reader-body">Ładowanie…</article>
      <div style="margin-top:16px">
        <button id="backBtn" class="nav-btn" type="button">⟵ Powrót</button>
      </div>
    </section>

    <footer>
      Droga wiary — strona dla katolików. ✝️ © 2025<br>
      <a href="mailto:drogawiary@wp.pl">Strona -->drogawiary@wp.pl</a>
    </footer>
  </div>

  <script>
    // --- elementy ---
    const intro = document.getElementById('intro');
    const btnWiara = document.getElementById('btn-wiara');
    const btnArty = document.getElementById('btn-arty');
    const btnModlitwy = document.getElementById('btn-modlitwy');
    const btnKsiazki = document.getElementById('btn-ksiazki');
    const tilesWiara = document.getElementById('tiles-wiara');
    const tilesArty = document.getElementById('tiles-arty');
    const tilesModlitwy = document.getElementById('tiles-modlitwy');
    const tilesKsiazki = document.getElementById('tiles-ksiazki');
    const buttons = document.querySelectorAll('.nav-btn');

    const reader = document.getElementById('reader');
    const readerTitle = document.getElementById('reader-title');
    const readerBody  = document.getElementById('reader-body');
    const backBtn     = document.getElementById('backBtn');

    // --- placeholdery treści (działa od razu bez plików) ---
    const INLINE_CONTENT = {
      'wiara/dom-modlitwy': '<p><em>Tu będzie treść artykułu do Moja Wiara — Dom modlitwy.</em> Dodaj opis jak przygotować w domu stałe miejsce modlitwy, proste rytuały i mały ołtarzyk (Pismo Święte, świeca, obrazek).</p>',
      'wiara/swiadectwa-wiary': '<p><em>Tu będzie treść artykułu do Moja Wiara — Świadectwa wiary.</em> Wklej tu krótkie osobiste historie i linki do dłuższych świadectw.</p>',
      'wiara/maryja-prowadzi': '<p><em>Tu będzie treść artykułu do Moja Wiara — Maryja prowadzi.</em> Napisz o wstawiennictwie Maryi w codzienności i praktyce różańca.</p>',
      'arty/swiatlo-wiary': '<p><em>Tu będzie treść artykułu do Artykuły — Światło wiary.</em> Wprowadzenie do cyklu rozważań: nadzieja, miłość, wytrwałość.</p>',
      'arty/pokoj-serca': '<p><em>Tu będzie treść artykułu do Artykuły — Pokój serca.</em> Krótka myśl o modlitwie serca i przebaczeniu.</p>',
      'arty/duchowe-drogowskazy': '<p><em>Tu będzie treść artykułu do Artykuły — Duchowe drogowskazy.</em> Jak rozeznawać decyzje z Bogiem: Słowo, spowiedź, kierownictwo duchowe.</p>'
    };

    // map tytułów (ładny H2)
    const TITLES = {
      'wiara/dom-modlitwy': 'Dom modlitwy',
      'wiara/swiadectwa-wiary': 'Świadectwa wiary',
      'wiara/maryja-prowadzi': 'Maryja prowadzi',
      'arty/swiatlo-wiary': 'Światło wiary',
      'arty/pokoj-serca': 'Pokój serca',
      'arty/duchowe-drogowskazy': 'Duchowe drogowskazy',
    };

    // skąd pobieramy pliki (gdy dodasz content/*.md w repo)
    const PATH = (slug) => {
      const [sec, name] = slug.split('/');
      if (sec === 'wiara') return `content/wiara/${name}.md`;
      if (sec === 'arty')  return `content/arty/${name}.md`;
      return null;
    };

    function clearAll() {
      [tilesWiara, tilesArty, tilesModlitwy, tilesKsiazki].forEach(el => el && (el.style.display = 'none'));
      intro.style.display = 'none';
      reader.style.display = 'none';
    }

    function setActive(btn) {
      buttons.forEach(b => { b.classList.remove('active'); b.setAttribute('aria-pressed','false'); });
      if (btn) { btn.classList.add('active'); btn.setAttribute('aria-pressed','true'); }
    }

    function showSection(section, button) {
      const isActive = button.classList.contains('active');
      // toggle zachowanie: kliknięcie aktywnego przycisku wraca do Intro
      if (isActive) {
        setActive(null);
        clearAll();
        intro.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
        location.hash = '';
        return;
      }

      setActive(button);
      clearAll();
      if(section === 'wiara')        tilesWiara.style.display = 'grid';
      else if(section === 'arty')    tilesArty.style.display = 'grid';
      else if(section === 'modlitwy')tilesModlitwy.style.display = 'grid';
      else if(section === 'ksiazki') tilesKsiazki.style.display = 'grid';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // przyciski główne
    btnWiara.addEventListener('click',   () => { showSection('wiara', btnWiara); location.hash = '#wiara'; });
    btnArty.addEventListener('click',    () => { showSection('arty', btnArty); location.hash = '#arty'; });
    btnModlitwy.addEventListener('click',() => { showSection('modlitwy', btnModlitwy); location.hash = '#modlitwy'; });
    btnKsiazki.addEventListener('click', () => { showSection('ksiazki', btnKsiazki); location.hash = '#ksiazki'; });

    // --- Router hash ---
    async function showArticle(section, name) {
      // podświetl sekcję
      const map = { wiara: btnWiara, arty: btnArty };
      setActive(map[section] || null);
      clearAll();

      // ustaw tytuł
      const slug = `${section}/${name}`;
      readerTitle.textContent = TITLES[slug] || 'Artykuł';

      // wczytaj treść: najpierw z pliku, jeśli brak — z INLINE_CONTENT
      const url = PATH(slug);
      readerBody.innerHTML = 'Ładowanie…';
      let loaded = false;
      if (url) {
        try {
          const res = await fetch(url, { cache: 'no-store' });
          if (res.ok) {
            let text = await res.text();
            if (url.endsWith('.md')) {
              text = text
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/\*\*(.*?)\*\*/gim, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/gim, '<em>$1</em>')
                .replace(/\n$/g, '')
                .replace(/\n\s*\n/g, '</p><p>')
                .replace(/^(?!<h\d|<p|<ul|<ol|<blockquote|<pre|<code)/gim, '<p>')
                .replace(/<\/p><p><\/p>/g, '</p>');
              readerBody.innerHTML = text.startsWith('<') ? text : `<p>${text}</p>`;
            } else {
              readerBody.innerHTML = text;
            }
            loaded = true;
          }
        } catch(e) { /* brak pliku — fallback niżej */ }
      }

      if (!loaded) {
        readerBody.innerHTML = INLINE_CONTENT[slug] || '<p>(Brak treści — dodaj plik .md lub uzupełnij INLINE_CONTENT.)</p>';
      }

      reader.style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showTiles(section) {
      setActive(
        section==='wiara'?btnWiara:
        section==='arty'?btnArty:
        section==='modlitwy'?btnModlitwy:
        section==='ksiazki'?btnKsiazki:null
      );
      clearAll();
      if(section==='wiara') tilesWiara.style.display='grid';
      else if(section==='arty') tilesArty.style.display='grid';
      else if(section==='modlitwy') tilesModlitwy.style.display='grid';
      else if(section==='ksiazki') tilesKsiazki.style.display='grid';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function handleHash(){
      const h = (location.hash||'').replace(/^#/, '').trim(); // '', 'wiara', 'wiara/dom-modlitwy'
      if(!h){ setActive(null); clearAll(); intro.style.display='block'; return; }
      const [section, name] = h.split('/');
      if(section && !name){ showTiles(section); return; }
      if(section && name){ showArticle(section, name); return; }
      // fallback
      setActive(null); clearAll(); intro.style.display='block';
    }

    window.addEventListener('hashchange', handleHash);
    document.addEventListener('DOMContentLoaded', handleHash);

    // Powrót: wracamy do listy danej sekcji
    backBtn.addEventListener('click', () => {
      const h = (location.hash||'').replace(/^#/, '').trim();
      const section = h.split('/')[0] || 'wiara';
      location.hash = '#' + section;
    });
  </script>
</body>
</html>
